<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoadBuddy</title>
    <link rel="stylesheet" href="../static/main.css">

    <!-- Leaflet CSS and js file -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

    <!-- Socket.io js file -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js" integrity="sha512-q/dWJ3kcmjBLU4Qc47E4A9kTB4m3wuTY7vkFJDTZKjTs8jhyGQnaUrxa0Ytd0ssMZhbNua9hE+E7Qv1j+DyZwA==" crossorigin="anonymous"></script> -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

</head>
<body>
    <div class="setting">
        <div class="setting-btn"></div>
        <div class="mode">追蹤設定</div>
        <div class="configure">個人資料</div>
        <div class="message">訊息</div>
        <div class="logout">登出</div>
        <div class="invite">新增隊員</div>
        <div class="leave">離開隊伍</div>
    </div>
    <div id="map"></div>
    <div class="main-pannel">
        <div class="pull-up"></div>
        <div class="drop-down"></div>
        <nav>
            <div class="nav-menu">
                <div class="nav-menu-title">好友列表</div>
                <div class="nav-menu-list">
                    <div class="nav-menu-friend">好友列表</div>
                    <div class="nav-menu-team">隊伍列表</div>
                </div>
            </div>
            
            <div class="nav-toggle"></div>
            <div class="nav-add-friend"></div>
            <div class="nav-add-team"></div>
        </nav>
        <div class="user-info">
            <div class="icon"></div>
            <div class="description">Loading...</div>
        </div>
        <div class="friend-color-intro">
            <div class="online">上線</div>
            <div class="offline">離線</div>
        </div>
        <div class="friend-outer">
            <div class="friend-list">
            </div>
        </div>
        <div class="team-color-intro">
            <div class="online">旅程中</div>
            <div class="offline">未啟程</div>
        </div>
        <div class="team-outer">
            <div class="team-outer-create">
                <div class="team-outer-title">你建立的</div>
                    <div class="team-outer-overflow">
                        <div class="create-list">
                        </div>
                    </div>
            </div>
            <div class="team-outer-join">
                <div class="team-outer-title">你加入的</div>
                <div class="team-outer-overflow">
                    <div class="join-list">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="friend-pannel">
        <div class="close"></div>
        <div class="pannel-title">新增好友</div>
        <div class="search">
            <div class="search-icon"></div>
            <input type="text" name="search-friend" placeholder="搜尋姓名">
        </div>
        <div class="search-outer">
            <div class="search-list">
            </div>
        </div>
        <button type="button">加入好友</button>
    </div>

    <div class="team-pannel">
        <div class="close"></div>
        <div class="pannel-title">創建隊伍</div>
        <div class="search">
            <input type="text" name="create-team" placeholder="隊伍名稱">
        </div>
        <div class="friend-title">新增隊員</div>
        <div class="friend-outer">
            <div class="friend-list">
            </div>
        </div>
        <button type="button" class="create-team-btn">創建</button>
        <button type="button" class="start-trip-btn">啟程</button>
        <button type="button" class="invite-trip-btn">邀請</button>
        <button type="button" class="join-trip-btn">申請加入</button>
    </div>

    <div class="tracking-pannel">
        <div class="pull-up"></div>
        <div class="drop-down"></div>
        <div class="pannel-title">隊員</div>
        <div class="partner-outer">
            <div class="partner-list">
            </div>
        </div>
    </div>
    <div class="message-pannel">
        <div class="close"></div>
        <div class="pannel-title">交友邀請</div>
        <div class="message-outer">
            <div class="message-list"></div>
        </div>
    </div>
    <div class="configure-pannel">
        <div class="close"></div>
        <div class="pannel-title">個人資料</div>
        <div class="configure-outer">
            <div class="image">
                <div class="undo"></div>
                <label for="avatar" class="avatar"></label>
                <input type="file" name="avatar" id="avatar" accept="image/png, image/jpg, image/jpeg">
            </div>
            <div class="configure-form">
                <div class="configure-form-email">
                    <div class="item">信箱</div>
                    <div class="value">123@mail</div>
                    <div></div>
                </div>
                <div class="configure-form-username">
                    <label for="username-to-update">姓名</label>
                    <input id="username-to-update" type="text" value="username" disabled>
                    <img src="../static/images/modify.svg" alt="modify.svg" class="modify">
                </div>
            </div>
            <div class="button">
                <button class="update-basic">確認修改基本資料</button>
                <button class="update-password">更改密碼</button>
            </div>
        </div>
    </div>

    <div class="friend-prompt">
        <div class="from"></div>
        <div class="content"></div>
        <button class="no">No</button>
        <button class="yes">Yes</button>
    </div>

    <div class="friend-response">
        <div class="content"></div>
        <button>OK</button>
    </div>

    <div class="friend-request">
        <div class="content"></div>
        <button>OK</button>
    </div>

    <div class="team-invite-prompt">
        <div class="from"></div>
        <div class="content"></div>
        <button class="no">No</button>
        <button class="yes">Yes</button>
    </div>

    <div class="team-invite-response">
        <div class="content"></div>
        <button>OK</button>
    </div>

    <div class="team-create-response">
        <div class="content"></div>
        <button>OK</button>
    </div>

    <div class="team-join-response">
        <div class="content"></div>
        <button>OK</button>
    </div>

    <div class="team-join-request">
        <div class="from"></div>
        <div class="content"></div>
        <button class="no">No</button>
        <button class="yes">Yes</button>
    </div>

    <div class="configure-response">
        <div class="close"></div>
        <p class="configure-response-title">更新中</p>
        <img src="../static/images/loading.gif" alt="loading.gif">
        <div class="configure-response-icon-src">
            <p>Icon by&nbsp</p>
            <a target="_blank" href="https://icons8.com">Icons8</a>
        </div>
    </div>

    <div class="update-password">
        <p class="update-password__title">更改密碼</p>
        <div class="update-password__old-password">
            <div class="update-password__old-password__title">
                <div>舊密碼</div>
            </div>
            <input type="password" name="original-password" id="old-password" placeholder="輸入舊密碼">
        </div>
        <div class="update-password__new-password">
            <div class="update-password__new-password__title">
                <div>新密碼</div>
            </div>
            <input type="password" name="original-password" id="new-password" placeholder="輸入新密碼">
        </div>
        <div class="update-password__confirm-password">
            <div class="update-password__confirm-password__title">
                <div>確認密碼</div>
            </div>
            <input type="password" name="original-password" id="confirm-password" placeholder="再次輸入新密碼">
        </div>
        <div class="update-password__button">
            <button class="cancel">取消</button>
            <button class="update">確認更改</button>    
        </div>
    </div>

    <div class="mode-prompt">
        <div class="close"></div>
        <p class="mode-prompt__title">位置追蹤模式</p>
        <div class="mode-prompt__switch-outer">
            <p class="option">隨機變化</p>
            <label class="switch" for="mode">
                <input type="checkbox" id="mode">
                <div class="slider">
                    <div class="dot"></div>
                </div>
            </label>
            <p class="option">即時追蹤</p>
        </div>
    </div>

    <canvas class="icon-canvas" width="200" height="200"></canvas>
    
    <script>
        // build global variables
        let//
        partnersColor = {},
        team_sender_info_cache,
        team_applicants_cache = {}, //{user_id-1:{applicant information}, user_id-2:{applicant information}}
        friend_sender_info_cache;

        //initialize socket.io
        let socket = io();
    </script>
    <script type="module" src="../static/main.js"></script>
    <script type="module" src="../static/event_handler/connect.js"></script>
    <script type="module" src="../static/event_handler/friend.js"></script>
    <script type="module" src="../static/event_handler/team.js"></script>
    <script type="module" src="../static/event_handler/tracking.js"></script>
</body>
</html>